# Memory Notes
- [2026-02-11T21:17:56.946Z] The developer heartbeat should load by itself instead of relying on prompt to load it. When the heartbeat triggers, it should be included in the context. [tags: developer, heartbeat, automation]
- [2026-02-11T22:02:33.566Z] New output tag added: &lt;markdown&gt;content&lt;/markdown&gt; allows the LLM to output directly in Markdown format, bypassing plain text restrictions when wrapped in this tag. [tags: output-format, markdown]
- [2026-02-11T22:57:48.260Z] Updated the 'New' button color to orange in the UI by changing the value in theme.ts. Validation tests failed, but TypeScript checks passed. Further investigation needed for test failures. [tags: button, color, update, theme]
- [2026-02-12T01:15:37.230Z] Suggestion: Enhance agent capability to automatically notify Architect (agent-architect) upon ending tasks via standardized agents_send message. Current method: agents_send before end_task. [tags: agent_notification, feature_request]
- [2026-02-12T01:16:23.269Z] ## Agent Notification Standardization Protocol\nAgents MUST notify Architect before &lt;end_task&gt;:\n```\n&lt;agents_send to=&quot;agent-architect&quot; title=&quot;{AGENT-ID}: Task '{TASK-TITLE}' Complete&quot; content=&quot;## Summary\n- Status: completed/failed\n- Changes: list files/actions\n- Verification: test outputs\n- Artifacts: links/files&quot; /&gt;\n&lt;end_task message=&quot;Task completed.&quot; /&gt;\n```\nUpdate all worker agent systemPrompts with this rule. Architect exempt. [tags: agent_protocol, notification_standard] [tags: agent_protocol, notification_standard]
- [2026-02-12T01:33:22.818Z] Tab UI isolation feature delegated to agent-tab-ui-dev: per-tab ChatPanels to hide LLM responses in non-belonging tabs; full render on tab switch (incl. tab 3). [tags: tui, tabs, chat, isolation, feature] [tags: tui, tabs, ui, feature, architect]
- [2026-02-12T01:47:56.289Z] Default tab configured to Architect (agent-architect:v4:1i4e5mt). Tab mode: ORCHESTRATOR. [tags: configuration, tab, architect]
- [2026-02-12T01:55:43.438Z] - [$(date -Iseconds)] Architect tab confirmed as default via .agents/agents.json "activeAgentId": "agent-architect". TUI TabsPanel uses agent IDs for tabs. No source code changes needed; config is authoritative. [tags: configuration, tab, architect, default, verified] [tags: configuration, tab, architect, default, verified]
- [2026-02-12T01:57:17.881Z] - [$(date -Iseconds)] Implemented default Architect tab: Added this.setActiveTab('agent-architect'); in src/plugins/tui/TUIApp.ts:137 after tabsPanel init. Overrides 'agents' default. Verified TS syntax. Pre-existing ESLint/TSconfig issues noted. [tags: feature, tui, tabs, architect, default] [tags: feature, tui, tabs, architect, default, verified]
- [2026-02-12T02:04:52.562Z] Set default agent system prompt template as provided by user. Persisted in .agents/DEFAULT_SYSTEM_PROMPT.md for use when creating new agents without custom systemPrompt. Template uses ${name} and ${normalizedResponsibility} placeholders. Architect will use this for spawning worker/orchestrator agents. [tags: configuration, agent_prompt, default, template] [tags: configuration, agent_prompt, default, template]
- [2026-02-12T02:11:27.121Z] Double "ending message" in LLM tabs caused by Verification policy requiring &lt;say_message&gt; for status before &lt;end_task&gt;, plus agent notification protocol (&lt;agents_send&gt; summary before &lt;end_task&gt;). Design feature, not bug. [tags: tui, tab, end_task, duplication, verified] [tags: bug_analysis, tui, end_task, policy]
- [2026-02-12T02:12:07.739Z] ## Updated Verification & Completion Policy\n- Verify at end: run formatter/linter/build.\n- Fix all errors/warnings before ending.\n- Include verification status in &lt;end_task message=&quot;Verified: no errors. Task done.&quot;/&gt; ONLY. Do NOT use separate &lt;say_message&gt; before end_task to avoid double messages.\n- For agents: Include summary in &lt;agents_send&gt; to architect, then &lt;end_task&gt; with brief confirmation.\n- Architect: On receiving notifications, verify then single &lt;end_task&gt;. [overrides: previous_verification_policy, double_message_fix]\n\n[2026-02-12] Policy changed per user request to prevent double ending messages in TUI tabs. [tags: policy, verification, end_task, override, tui, double_message]
- [2026-02-12T02:12:08.025Z] - [2026-02-12] Updated policy to use single end_task message including verification status. Removed say_message reporting to fix double ending messages in LLM tabs. All agents must follow: memory_search for 'verification policy' before ending tasks.
- [2026-02-12T02:14:55.961Z] User preference [2026-02-12]: Architect focuses only on popping/delegating tasks, not coding directly. For coding requests like 'implement this', understand context fully before using agents. [tags: architect_behavior, user_prefs]
- [2026-02-12T15:22:54.155Z] [2026-02-12TXX:XX:XX.XXXZ] Architect spawning policy update: Always execute agents_status before spawning new agents via agents_create or similar. First check for available suitable existing agents (idle, matching responsibility) to optimize and avoid proliferation. If none suitable, then spawn with tailored responsibility/systemPrompt. Persist this in all planning steps. [from task-1770909763709-s1s4ge] [tags: architect_policy, agent_spawning, agents_status, process_update]
- [2026-02-12T15:57:47.099Z] Connector Architecture (2026-02-12): Independent sessions/tabs undeletable when active. Agent profiles lifecycle: create on config=true, delete on inactive. Sessions persist dormant. Policy: Manual delete profile for inactive; optional auto-cleanup agent. [tags: connectors, agents, sessions, lifecycle]
- [2026-02-12T16:36:46.919Z] [2026-02-12] Fixed agent tool calls: Updated systemPrompts for architect, worker-1, tui-debugger to use &lt;xai:function_call name="tool"&gt;&lt;parameter&gt;&lt;/&gt;&lt;/xai:function_call&gt; format exclusively. Removed stale agent-developer dir. Agents should now execute tools without format errors. [tags: agents_fix, tool_calls]
- [2026-02-12T16:37:26.579Z] User instruction: Ping Telegram chat_id 1007767240 when all agent jobs finish (when running queue reaches 0). Architect agents should monitor agents_status periodically and use telegram_send tool to notify. [tags: monitor_ping, telegram_1007767240]
